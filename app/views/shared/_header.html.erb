<header class="container mx-auto flex-1" data-controller="mobile-menu">
  <div class="mx-auto flex items-center justify-between py-3 px-3 xl:px-0">
    <!-- Logo -->
    <div class="flex items-center gap-3">
      <%= link_to root_path, class: "flex items-center gap-2" do %>
        <span class="inline-flex h-8 w-8 items-center justify-center rounded bg-orange-600 text-white font-bold">F</span>
        <span class="text-lg font-semibold">
          Find My Club
        </span>
      <% end %>
    </div>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex items-center gap-4 text-sm">
      <%= link_to clubs_path, class: "inline-flex items-center gap-2 h-9 text-gray-700 hover:text-gray-900 dark:text-gray-300 hover:dark:text-white" do %>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"/>
        </svg>
        Find Clubs
      <% end %>

      <% if user_signed_in? %>
        <%= link_to "My Clubs", my_clubs_path, class: "inline-flex items-center h-9 text-gray-700 hover:text-gray-900 dark:text-gray-300 hover:dark:text-white" %>

        <!-- User Dropdown Menu -->
        <div class="relative" data-controller="dropdown">
          <button data-action="click->dropdown#toggle" class="inline-flex items-center gap-2 h-9 px-3 rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800">
            <div class="flex items-center justify-center w-6 h-6 rounded-full bg-orange-600 text-white text-xs font-bold">
              <%= current_user.first_name[0].upcase %>
            </div>
            <span class="hidden lg:inline"><%= current_user.first_name %></span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
            </svg>
          </button>

          <!-- Dropdown Menu -->
          <div data-dropdown-target="menu" class="hidden absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 z-50">
            <div class="py-1">
              <%= link_to user_path(current_user), data: { action: "click->dropdown#close" }, class: "flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
                </svg>
                Profile
              <% end %>
              <%= link_to edit_user_registration_path, data: { action: "click->dropdown#close" }, class: "flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                </svg>
                Account Settings
              <% end %>
              <div class="border-t border-gray-100 dark:border-gray-700"></div>
              <%= button_to destroy_user_session_path, method: :delete, data: { turbo_confirm: 'Are you sure you want to Sign out?', action: "click->dropdown#close" }, class: "w-full text-left flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:text-red-400 dark:hover:bg-gray-700" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75" />
                </svg>
                Sign out
              <% end %>
            </div>
          </div>
        </div>
      <% else %>
        <%= link_to "Log in", new_user_session_path, class: "inline-flex items-center h-9 text-gray-700 hover:text-gray-900 dark:text-gray-300 hover:dark:text-white" %>
        <%= link_to "Sign up", new_user_registration_path, class: "inline-flex h-9 items-center rounded-md bg-orange-600 px-3 font-medium text-white hover:bg-orange-700" %>
      <% end %>

      <button data-controller="theme-toggle" data-theme-toggle-target="button" data-action="click->theme-toggle#toggle" aria-label="Toggle theme" aria-pressed="false" class="inline-flex items-center justify-center h-9 w-9 rounded-md text-gray-700 hover:text-gray-900 dark:text-gray-300 hover:dark:text-white cursor-pointer" title="Toggle theme">
        <!-- Lightbulb icon -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5">
          <path d="M12 2a7 7 0 0 0-4.95 11.95c.41.41.82 1.05 1 1.68l.14.5h7.62l.14-.5c.18-.63.59-1.27 1-1.68A7 7 0 0 0 12 2Zm-3 15.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-.5Z"/>
        </svg>
      </button>
    </nav>

    <!-- Mobile menu button -->
    <div class="md:hidden flex items-center gap-2">
      <button data-controller="theme-toggle" data-theme-toggle-target="button" data-action="click->theme-toggle#toggle" aria-label="Toggle theme" aria-pressed="false" class="inline-flex items-center justify-center h-9 w-9 rounded-md text-gray-700 hover:text-gray-900 dark:text-gray-300 hover:dark:text-white cursor-pointer" title="Toggle theme">
        <!-- Lightbulb icon -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5">
          <path d="M12 2a7 7 0 0 0-4.95 11.95c.41.41.82 1.05 1 1.68l.14.5h7.62l.14-.5c.18-.63.59-1.27 1-1.68A7 7 0 0 0 12 2Zm-3 15.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-.5Z"/>
        </svg>
      </button>

      <button data-action="click->mobile-menu#toggle" aria-label="Toggle menu" class="inline-flex items-center justify-center h-9 w-9 rounded-md text-gray-700 hover:text-gray-900 dark:text-gray-300 hover:dark:text-white cursor-pointer">
        <!-- Hamburger icon -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation Menu -->
  <div data-mobile-menu-target="menu" class="md:hidden hidden absolute w-98 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-4 z-48 mx-2 mt-2 right-0">
    <nav class="px-3 py-4 space-y-2">
      <%= link_to clubs_path, data: { action: "click->mobile-menu#close" }, class: "flex items-center gap-2 px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800" do %>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"/>
        </svg>
        Find Clubs
      <% end %>

      <% if user_signed_in? %>
        <%= link_to "My Clubs", my_clubs_path, data: { action: "click->mobile-menu#close" }, class: "block px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800" %>
        <%= link_to user_path(current_user), data: { action: "click->mobile-menu#close" }, class: "flex items-center gap-2 px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800" do %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
          </svg>
          Profile
        <% end %>

        <%= link_to edit_user_registration_path, data: { action: "click->dropdown#close" }, class: "flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700" do %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
          </svg>
          Account
        <% end %>

        <%= button_to destroy_user_session_path, method: :delete, data: { turbo_confirm: 'Are you sure you want to Sign out?', action: "click->dropdown#close" }, class: "w-full text-left flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:text-red-400 dark:hover:bg-gray-700" do %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75" />
          </svg>
          Sign out
        <% end %>
      <% else %>
        <%= link_to "Log in", new_user_session_path, data: { action: "click->mobile-menu#close" }, class: "block px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800" %>
        <%= link_to "Sign up", new_user_registration_path, data: { action: "click->mobile-menu#close" }, class: "block px-3 py-2 rounded-md bg-orange-600 text-white hover:bg-orange-700" %>
      <% end %>
    </nav>
  </div>
</header>
